@main[]

$ft[^file::exec[cat.sh; $.stdin[test^#0D^#0A] ;stdin]]
ft:^json:string[$fb; $.file[text] ]

$f1[^file::create[$ft; $.mode[binary] ]]
f1:^json:string[$f1; $.file[text] ]

$fb[^file::exec[binary;cat.sh; $.stdin[test^#0D^#0A] ;stdin]]
fb:^json:string[$fb; $.file[text] ]

$f2[^file::create[$fb; $.mode[text] ]]
f2:^json:string[$f2; $.file[text] ]

$f3[^file::create[$fb; $.content-type[my/format] ]]
f3:^json:string[$f3]

$f4[^file::create[$f3; $.name[test.gif] ]]
f4:^json:string[$f4]

$f5[^file::create[$f4; $.mode[text] ]]
f5:^json:string[$f5]

$f6[^file::create[$f5; $.mode[binary] $.name[test2.gif] $.content-type[image/gif] ]]
f6:^json:string[$f6]

