@main[]

^rem{ OP_GET_ELEMENT4CALL, OP_GET_OBJECT_ELEMENT4CALL, OP_GET_OBJECT_VAR_ELEMENT4CALL are tested here }

^test[ $.name[value] ]
^test[ $._count[is count] $.name[value] ]

^test[ ^table::create{name
value} ]

^test[ ^table::create{name	count
value	is count} ]

@test[h]
Testing $h.CLASS_NAME

Test-hash:
^test-hash[$h]
Test-table:
^test-table[$h]
Test-no-such-method:
^test-no-such-method[$h]

@test-hash[h][deep;var]

$deep[ $.h[$h] ]
$var[_count]

^t-c{var: $deep.h._count}
^t-c{method: ^deep.h._count[]}
^t-c{var: $deep.h.$var}
^t-c{method: ^deep.h.$var[]}

^t-c{var: $h._count}
^t-c{method: ^h._count[]}
^t-c{var: $h.$var}
^t-c{method: ^h.$var[]}

@test-table[h][deep;var]

$deep[ $.h[$h] ]
$var[count]

^t-c{var: $deep.h.count}
^t-c{method: ^deep.h.count[]}
^t-c{var: $deep.h.$var}
^t-c{method: ^deep.h.$var[]}

^t-c{var: $h.count}
^t-c{method: ^h.count[]}
^t-c{var: $h.$var}
^t-c{method: ^h.$var[]}

@test-no-such-method[h][deep;var]

$deep[ $.h[$h] ]
$var[no-such-method]

^t-c{var: $deep.h.no-such-method}
^t-c{method: ^deep.h.no-such-method[]}
^t-c{var: $deep.h.$var}
^t-c{method: ^deep.h.$var[]}

^t-c{var: $h.no-such-method}
^t-c{method: ^h.no-such-method[]}
^t-c{var: $h.$var}
^t-c{method: ^h.$var[]}

@t-c[code]
$result[^try-catch{$code}]
^if($result is junction){$result[junction]}
