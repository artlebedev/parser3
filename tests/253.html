@main[]

$f[^file::load[text;253_json.txt]]
$s[^taint[as-is][$f.text]]

^try_catch{$o[^json:parse[$s]]}

$o[^json:parse[$s][ $.distinct[first] ]]
^print[$o]

$o[^json:parse[$s][ $.double(false) $.distinct[last] ]]
^print[$o]

$o[^json:parse[$s][ $.object[$hook] $.distinct[all] ]]
^print[$o]

@try_catch[code]
^try{
	$code
}{
	$exception.handled(true)
	$exception.source
	$exception.comment
}

@print[hash]
^hash.foreach[k;v]{
	$k = ^if($v is 'hash'){{^print[$v] 
	}}{
		$v.CLASS_NAME ^if($v is 'bool'){ ^if($v){true}{false} }($v is 'class1' || $v is 'class2'){^v.print[]}{$v}
	}
}

@hook[key;value]
$result[^if(def $value.type){^reflection:create[$value.type;create;$value]}{$value}]

@CLASS
class1

@create[h]
$value[$h.value]

@print[]
value "$value"

@CLASS
class2

@create[h]
$value[$h.value]

@print[]
value "$value"
