@main[]
^print[^o1::create[]]
<br />
^print[^o2::create[]]

allowed: ^json:string[^hash::create[non-blank string]]


@print[o][v]
Class: <b>$o.CLASS_NAME</b><br />

expression: ^eval($o)<br />

$v[^hash::create[$o]]
hash: $v.key<br />

$v[^table::create[$o]]
table: $v.name<br />

def: ^if(def $o){true}{false}<br />

bool: ^if($o || 0){true}{false}<br />

double: ^eval($o + 0)<br />



@CLASS
o1

@create[]

@GET[mode]
^switch[$mode]{
	^case[expression]{ $result(-1) }
	^case[hash]{ $result[$.key[hash-value]] }
	^case[table]{ $result[^table::create{name^#0Atable-value}] }
	^case[def]{ $result(true) }
	^case[bool]{ $result(false) }
	^case[double]{ $result(255) }
	^case[DEFAULT]{ ^throw[;unsupported mode '$sMode'] }
}


@CLASS
o2

@create[]

@GET[mode]
^switch[$mode]{
	^case[expression]{ $result(0) }
	^case[hash]{ $result[$.key[hash-value]] }
	^case[table]{ $result[^table::create{name^#0Atable-value}] }
	^case[def]{ $result(false) }
	^case[bool]{ $result(true) }
	^case[double]{ $result(32) }
	^case[DEFAULT]{ ^throw[;unsupported mode '$sMode'] }
}
