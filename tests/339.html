@main[]
^load[http://www.parser.ru/_/tests/nph-339.pl]
^load[http://www.parser.ru/_/tests/nph-339.pl?name=1; $.charset[windows-1251]]
^load[http://www.parser.ru/_/tests/nph-339.pl/; $.response-charset[UTF-8] ]
#^curl[]

@load[url;options]
$headers[ $.test[русский] ]
$form[ $.имя[русский] ]
^show[file;^file::load[text;$url; ^hash::create[$options] $.headers[$headers] $.form[$form] $.method[POST] $.enctype[multipart/form-data] ]]
#^show[curl;^curl:load[ ^hash::create[$options] $.url[$url] $.httpheader[$headers] $.httppost[$form] ]]

@curl[]
^curl:session{
    $s[^curl:version[]]
    ^json:string[^curl:info[]]
}
$s[^curl:version[]]
^try-catch{^curl:load[ $.url[ftp://parser.ru/] ]}


@show[title;f]
$title : ^json:string[$f; $.indent(true) $.file[text] ]
