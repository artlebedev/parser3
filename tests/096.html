@main[]
^test_exif[096_dir]

@test_exif[dir]
$file[^file:list[$dir;\.(jpe?g|JPE?G)^$]]
<table border=1>
^file.menu{
<tr valign=top>
	$image[^image::measure[$dir/$file.name]]
	<td>^image.html[$.width(100)$.height(100)]</td>
	<td>
		$file.name<hr>
     	$exif[$image.exif]
     	^if($exif){
     		$keys[^exif._keys[]] ^keys.sort{$keys.key}
     		^keys.menu{
     			$key[$keys.key]
     			$value[$exif.$key]

     			${key}: <b>^show_exif_value[$value]</b><br>
     		}
     	}{
     		no EXIF info<br>
     	}
    </td>
</tr>
}
</table>

@show_exif_value[value][i]
^if($value is date){
	^value.sql-string[]
}{
	^if($value is hash){
		^for[i](0;$value-1){$value.$i}[,]
	}{
		$value
	}
}
