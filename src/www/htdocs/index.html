@dump[t]
^t.menu{$n<BR>}
<HR>
@func[n]
$n
@twop[a;b]
($a,$b)

@Zpostprocess[data]
#(<BR>$data)<BR>
^data.match[1][g]{X}

@mt[s;m]
$m ^if(^s.match[$:m;i]){matches}{does not match} $s<BR>

@main[]
#$SQL.drivers.a[z]

<form action=post.html method=post>
<input name=name value=значение>
<input type=submit>
</form>
<HR>
match xmg:<BR>
$s[2
2]
$r[^s.match[(2^$ #comment


)][xmg]]
^r.menu{$match}[,]
<HR>

image:create<BR>
$itext[^image:create(300;100)]
$itext{
^font[ ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя0123456789-+=!\"%:,.^^^;<>?@()[]'&*/;font.gif](13)
^^text(10;10)[ПАФ сделал это]<BR>
^text(10;10)[ПАФ сделал это]
^font[ ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя0123456789-+=!\"%:,.^^^;<>?@()[]'&*/;font.gif](13;8)
^^text(10;30)[ПАФ сделал это fixed]<BR>
^text(10;30)[ПАФ сделал это fixed]
}
$ff[^itext.gif[]]
^ff.save[i/itext.gif]
^rem{
^ff.save[i2/itext.gif]
^file:delete[i2/itext.gif]
}
^itext.html[$src[i/itext.gif]]


<HR>
$t[^table:set{id}]
^^t.id.int[]=^t.id.int[]<BR>
^^hren.double[]=^hren.double[]<BR>
<HR>
#image:create<BR>
#$drawing[^image:create(300;100)]
drawing:load<BR>
$drawing[^image:load[001004paf(c)lena_karin.gif]]
$drawing{
^$drawing.width=$width<BR>
^$drawing.height=$height<BR>
^for[i](0;$width/4){
^line(0;0)($:i*4;$height-1)(0x00FF00)
}

^rectangle(100;10)(180;40)(0xFF0000)
^bar(100+20;10+20)(180+20;40+20)(0xFFFF00)
^fill(0;0)(0x0000FF)
^replace(0xFFffFF;0x00FF00)(30;0)(150;99)(200;50)
^polybar(0x00FFFF)(200;100)(170;99)(280;50)
^polygon(0xFFFF00)(210;100)(160;90)(250;50)

}
<HR>
#$response:body[^drawing.gif[]]
$ff[^drawing.gif[]]
^ff.save[drawing.gif]
^drawing.html[$src[drawing.gif]]
<HR>
image:load<BR>
$face[^image:load[001004paf(c)lena_karin.gif]]
^$face.src=$face.src<BR>
^$face.width=$face.width<BR>
^$face.height=$face.height<BR>
<HR>

^if($form:photo){
upload file:<BR>
$face[^image:measure[$form:photo]]
$face.src=$face.src<BR>
^$face.width=$face.width<BR>
^$face.height=$face.height<BR>
<HR>
}
gif file class:<BR>
$face[^image:measure[^file:load[001004paf(c)lena_karin.gif]]]
^$face.src=$face.src<BR>
^$face.width=$face.width<BR>
^$face.height=$face.height<BR>
^^face.html[]=^face.html[]<BR>
<HR>
gif:<BR>
$face[^image:measure[001004paf(c)lena_karin.gif]]
^$face.src=$face.src<BR>
^$face.width=$face.width<BR>
^$face.height=$face.height<BR>
^^face.html[]=^face.html[]<BR>
<HR>
jpeg:<BR>
$face[^image:measure[001004paf(c)lena_karin.jpg]]
^$face.src=$face.src<BR>
^$face.width=$face.width<BR>
^$face.height=$face.height<BR>
<a href=$request:uri>^^face.html[^$border(1) ^$ismap(-1)]=^face.html[$border(1) $ismap(-1)]</a>
<HR>

^rem{
^mail:send[
	$from[paf@design.ru]
	$to[paf@design.ru]
	$subject[test проверка]
	$body[test]
	$content-type[$value[text/plain] $charset[windows-1251]]
]
<HR>
}

env.pl<BR>
$e[^file:cgi[env.pl;$t[<b>1</b>]]]
^$e.exit-code=$e.exit-code<BR>
^$e.stderr="$e.stderr"<BR>
^$e.header="$e.header"<BR>
$e.text
<HR>

^rem{^mail:send[
    $to[paf@design.ru]
    $from[paf@design.ru]
	$body[
		$1[
			$content-type[
			    $value[text/plain]
	    		$charset[windows-1251]
			]
			$body[привет, PAF.

sincerily yours,
PAF
]
		]
		$attach[
			$value[^file:load[test.zip]]
			$type[uue]
			$file-name[retest.zip]
		]
	]
]
}

^rem{^mail:send[
	$content-type[
	    $value[text/plain]
    	$charset[windows-1251]
	]
    $to[paf@design.ru]
    $from[paf@design.ru]
	$body[привет, PAF.

sincerily yours,
PAF
]
]
}

^rem{^mail:send[
    $to[paf@design.ru]
    $from[paf@design.ru]
    $body[
    	$2[
    		$content-type[$value[message/rfc822] $name[letter.eml]]
    		$body[to: paul
from: paf
subject: 2

2.body
    		]
    	]
    	$1[
			$to[paul]
    		$from[paf]
    		$subject[1]
    		$content-type[text/plain]
    		$body[image]
    	]
    ]
]}


^^table:dir[/]:<BR>
$d[^table:dir[/]]
^d.menu{$name &nbsp^;&nbsp^;&nbsp^;&nbsp^;^if(-f $name){-f} ^if(-d $name){-d};<BR>}
<HR>

^^table:dir[/;html^$]<BR>
$d[^table:dir[/;html^$]]
^d.menu{$name;<BR>}
<HR>

#^rem{
^connect[$SQL.connect-string]{
	$shit[^taint[our's]]
#	$paf[^table:sql{insert into paf (name, age) values ('$shit', ^random:generate(10000))}]
	$paf[^table:sql{select * from paf order by id desc}(5)]
	$paf{
	^empty{query result is empty}{
	<table border=1>
		<tr><td>id</td><td>name</td><td>age</td></tr>
		^menu{<tr><td>$id</td><td>$name</td><td>$age</td></tr>}
	</table>
	}}
}
#}

<HR>

$with-cr[^table:set{a	b
^taint[<1
2>]	3
}]
"$with-cr.a"<BR>
<HR>
^if(def $form:s){
	$form:s<BR>
	^form:s.match[!][g]{<b>!</b>}<BR>
	<HR>
}

$r[1223]
^^"$r".match[2][]{(^$match)}=^r.match[2][]{($match)}<BR>
^^"$r".match[2][i]{(^$match)}=^r.match[2][i]{($match)}<BR>
^^"$r".match[2][g]{(^$match)}=^r.match[2][g]{($match)}<BR>
^^"$r".match[2+][g]{(^$match)}=^r.match[2+][g]{($match)}<BR>
<HR>
$s[abcЯ]
$sm[^s.match[(.)][g]]
^^"$s".match[(.)][g]:<BR>
^sm.menu{
	^line[]:<BR>
	^$prematch=$prematch<BR>
	^$match=$match<BR>
	^$postmatch=$postmatch<BR>
	^$1=$1<BR>
}
<HR>
$sm[^s.match[(.)][]]
^^"$s".match[(.)][]:<BR>
^sm.menu{
	^line[]:<BR>
	^$prematch=$prematch<BR>
	^$match=$match<BR>
	^$postmatch=$postmatch<BR>
	^$1=$1<BR>
}
<HR>
^mt[$s;я]
^mt[$s;Я]
^mt[$s;b]
^mt[$s;^^b]
^mt[$s;^^a]
^mt[$s;x]

<HR>

$dest[^table:set[nameless]{
$form:d11	d12	d13
d21	d22	d23
}]
$src[^table:set{a	b	c	d

s1	s2	s3	s4
}]
1:<BR>^dest.menu{$0!$1!$2!$3!<BR>}
^dest.join[$src]
2:<BR>^dest.menu{$0!$1!$2!$3!<BR>}

<HR>
$dest[^table:set{a	b	c
d11	d12	d13
d21	d22	d23
}]
$src[^table:set{a	b	c	d
s1	s2	s3	s4
}]
^dest.join[$src]
dest.menu:<BR>
^dest.menu{$a!$b!$c!<BR>
^rem{lock violation^table:set[nameless]{1
2
3}]
}
}

<HR>
^^random:generate(10)=^random:generate(10)<BR>


<HR>
$t[^table:load[/test.cfg]]
$t{
^menu{$a!$b!$c<BR>}
<HR>
^append{x	y	z}
^menu{$a!$b!$c<BR>}
<HR>
^flip[]
^menu{$0!$1!$2!$3<BR>}
<HR>
}

$a[vasya,fedya,kolya]
^^"$a".lsplit[,]=$as[^a.lsplit[,]]$as.0|$as.1|$as.2|$as.3<BR>
^^"$a".rsplit[,]=$as[^a.rsplit[,]]$as.0|$as.1|$as.2|$as.3<BR>
^^a.pos(sy]="^a.pos[sy]"<BR>
^^a.pos[zsy]="^a.pos[zsy]"<BR>
^^a.left(3)="^a.left(3)"<BR>
^^a.right(3)="^a.right(3)"<BR>
^^a.mid(1;3)="^a.mid(1;3)"<BR>
<HR>
^^twop[a;]=^twop[a;]<BR>
^$request:browser.type=$request:browser.type<BR>
^$request:browser.version=$request:browser.version<BR>

$tf[^file:load[test.zip;abc.zip]]
#$response:body[$tf]

^$tf.name=$tf.name<BR>
^$tf.size=$tf.size<BR>
^$tf.mime-type=$tf.mime-type<BR>
^$tf.text:<BR>
$tf.text<HR>
<HR>
^file:find[test.cfg]<BR>
^file:find[tes.cfg]{not found}<BR>
<HR>

$t[^table:set{n
3
01.3
1.2
2
}]
$t{^locate[n;2z]^found{$n}{not found}}<BR>
$t{^locate[n;3]^found{found:$n}{not found}}<BR>
^$t:<BR>
^dump[$t]
^t.sort($n)
^^t.sort(^$n):<BR>
^dump[$t]
^t.sort{^:func($n)}
^^t.sort{^^:func(^$n)}:<BR>
^dump[$t]
^t.sort{$n}
^^t.sort{^$n}:<BR>
^dump[$t]
^t.sort{$n}[desc]
^^t.sort{^$n}[desc]:<BR>
^dump[$t]
<HR>

^if(-f index.html){y}{n}<BR>
^taint[html-typo;не знаю
я ничего

<<слово длинное>>

(c) by Я
]<HR>
$t[^table:load[/test.cfg]]
^process[@b[]
f
]
^b[]<BR>

^$t.a=$t.a<BR>
^t.offset[2]
#$r[^t.record[]]
#^$r.a=$r.a<BR>

^$request:uri=$request:uri<BR>
^$env:PATH_INFO=$env:PATH_INFO<BR>
^$env:REMOTE_ADDR=$env:REMOTE_ADDR<BR>

^rem{
$response:body[]
$response:location[http://parser3/123]
}


<HR>
^^auto_test[]:<BR>
<ol>
^auto_test[]
</ol>
<HR>

#$cookie:вот[прислал "browser"]
^${cookie:вот}=${cookie:вот}?<BR>
^$request:query=$request:query<BR>
^$request:uri=$request:uri<BR>

<form method=post>
<input type=hidden name=a value=123>
<table border=1 width=250><tr><td>$form:name</td></tr></table>
<textarea name=name rows=5 cols=40>^untaint[html]{^default[$form:name;Пробный текст: А.Ф._Петросян <<Жизнь в Аду>>
нажми Submit]}</textarea><BR>
<input type=submit>
</form>

<HR>
$свойства_когда_пьян[
	$цвет_глаз[красный]
]
$вася[
	$свойства[$свойства_когда_пьян]
]

$кусок_имени_поля[ства]
^$кусок_имени_поля=$кусок_имени_поля<BR>
^$вася.свой^$кусок_имени_поля.цвет_глаз=$вася.свой$кусок_имени_поля.цвет_глаз
<HR>
<form method=post enctype=multipart/form-data>
<input name=photo type=file>
<input type=submit>
</form>
<hr>
^if($form:photo){
	<pre>
	^$form:photo.name='$form:photo.name'
	^$form:photo.size='$form:photo.size'
	^$form:photo.text='$form:photo.text'
	^form:photo.save[paf.txt]
	</pre>
}

#todo proper! untaint $response:refresh[$value[2] $content[url=http://design.ru]]


@default[test;def]
$result[^if(^test.length[]){$test}{$def}]

@exception[origin;source;comment;type;code]
<body bgcolor=black>
<font color=white>
ERROR:
^if(def $source){$origin '$source'}
${comment}.
^if(def $type){type=$type}
^if(def $code){code=$code}

@auto_test[]
^BASE.auto_test[]
<li>${request:uri}!